!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SlideV=t():e.SlideV=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i(1)),s=a(i(2)),o=a(i(3)),r=a(i(4)),l=a(i(5));function a(e){return e&&e.__esModule?e:{default:e}}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var a=t;a||(a={}),(0,n.default)(a)&&(this._config=(0,s.default)(a),(0,l.default)(),(0,o.default)(Element.prototype),(0,r.default)(Element.prototype),["_onTransitionEnd","_onResize","_onTouchStart","_onTouchMove","_onTouchEnd","_onMouseDown","_onMouseMove","_onMouseLeave","_onMouseUp","_onCancelDragTransitionEnd"].forEach(function(e){i[e]=i[e].bind(i)}),this._onDragStart=function(e){return e.preventDefault()},this._init())}var t,i,a;return t=e,(i=[{key:"_init",value:function(){this._containerElem=this._config.containerSelector,this._isInit=!0,this._buffer=[],this._position=0,this._numberOfSlides=this._containerElem.children.length,this._numberSlidesAfterFrame=this._numberOfSlides-this._config.slidesInFrame,this._createDomStructure(),this._eventSubscribe()}},{key:"_createDomStructure",value:function(){this._containerElem.style.overflow="hidden",this._containerElem.style.position="relative",this._movingElem=document.createElement("div"),this._movingElem.style.position="relative",this._movingElem.style.left="0",this._movingElem.style.transitionProperty="left",this._config.movingElemClass&&this._movingElem.classList.add(this._config.movingElemClass),this._config.draggable&&(this._movingElem.style.cursor="-webkit-grab",this._movingElem.style.cursor="-moz-grab",this._movingElem.style.cursor="grab");for(var e=0;e<this._numberOfSlides;e+=1){var t=this._containerElem.firstElementChild;this._setCssSlideElem(t),this._movingElem.appendChild(t)}this._setWidths(),this._containerElem.innerHTML="",this._containerElem.appendChild(this._movingElem)}},{key:"_setCssSlideElem",value:function(e){e.style.display="inline-block",e.setAttribute("data-slide-v-elem","slide-elem"),this._config.slideElemClass&&e.classList.add(this._config.slideElemClass)}},{key:"_setWidths",value:function(){this._movingElem.style.width="".concat(100/this._config.slidesInFrame*this._numberOfSlides,"%");for(var e=100/this._numberOfSlides,t=0;t<this._numberOfSlides;t+=1)this._movingElem.children[t].style.width="".concat(e,"%")}},{key:"getState",value:function(){return{curentSlideIndex:this._position,numberSlidesAfterFrame:this._numberSlidesAfterFrame,lastSlideIndex:this._numberOfSlides-1}}},{key:"next",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step,i=void 0===t?this._config.step:t,n=e.isAnimated,s=void 0===n||n,o=e.callback;return this._initApi({method:this._takeStep,options:{step:i,isAnimated:s,callback:o}}),this}},{key:"prev",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step,i=void 0===t?this._config.step:t,n=e.isAnimated,s=void 0===n||n,o=e.callback;return this._initApi({method:this._takeStep,options:{step:-i,isAnimated:s,callback:o}}),this}},{key:"goTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.isAnimated,n=void 0===i||i,s=t.callback;return this._initApi({method:this._goToPosition,options:{position:e,isAnimated:n,callback:s}}),this}},{key:"append",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).callback;return this._initApi({method:this._insertAppend,options:{slideElem:e,callback:t}}),this}},{key:"prepend",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).callback;return this._initApi({method:this._insertPrepend,options:{slideElem:e,callback:t}}),this}},{key:"insert",value:function(e,t){var i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).callback;return this._initApi({method:this._insertBeforeSlideElem,options:{slideElem:e,index:t,callback:i}}),this}},{key:"remove",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).callback;return this._initApi({method:this._removeSlideElem,options:{index:e,callback:t}}),this}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.initialMarkup,i=e.callback;return this._initApi({method:this._deactivation,options:{initialMarkup:t,callback:i}}),this}},{key:"_initApi",value:function(e){var t=e.method,i=e.options;this._isInit&&(this._callbackBuffer?this._callbackBuffer.push(t.bind(this,i)):this._inMovingProgress?this._buffer.push(t.bind(this,i)):t.call(this,i))}},{key:"_goToPosition",value:function(e){var t=e.position,i=e.isAnimated,n=e.callback,s=t-this._position;return this._takeStep({step:s,isAnimated:i,callback:n})}},{key:"_takeStep",value:function(e){var t=e.step,i=e.isAnimated,n=void 0===i||i,s=e.callback;return this._inMovingProgress=!0,this._config.draggable&&this._config.transitionDuration>700&&(this._movingElem.style.cursor="",this._movingElem.style.cursor="",this._movingElem.style.cursor=""),this._curentStep=this._getСurentStep(t),0===this._curentStep?(this._inMovingProgress=!1,this._callbackHandler({callback:s}),void this._callApiFromBuffer()):(this._movingElem.style.left="".concat(this._getNextPositionLeft(),"px"),this._position+=this._curentStep,this._numberSlidesAfterFrame+=-this._curentStep,n?(this._movingElem.style.transitionDuration="".concat(this._config.transitionDuration,"ms"),void(this._callback=s)):(this._inMovingProgress=!1,this._movingElem.style.transitionDuration="",this._callbackHandler({callback:s}),void this._callApiFromBuffer()))}},{key:"_getСurentStep",value:function(e){var t=1===Math.sign(e)?this._numberSlidesAfterFrame:this._position;return Math.abs(e)<t?e:t*Math.sign(e)}},{key:"_getNextPositionLeft",value:function(){var e=parseFloat(getComputedStyle(this._movingElem.firstElementChild).width);return this._lastSlideWidth=e,-(this._position+this._curentStep)*e}},{key:"_onTransitionEnd",value:function(){this._inMovingProgress=!1,this._config.draggable&&this._config.transitionDuration>700&&(this._movingElem.style.cursor="-webkit-grab",this._movingElem.style.cursor="-moz-grab",this._movingElem.style.cursor="grab"),this._config.onMoveEnd(),this._callbackHandler({callback:this._callback}),this._callApiFromBuffer()}},{key:"_callbackHandler",value:function(e){var t=e.callback;"function"==typeof t&&(this._callbackBuffer=[],t(),this._buffer=this._callbackBuffer.concat(this._buffer),this._callbackBuffer=null,this._callback=null)}},{key:"_callApiFromBuffer",value:function(){this._buffer.length>0&&this._buffer.shift()()}},{key:"_insertPrepend",value:function(e){var t=e.slideElem,i=e.callback,n=this._numberOfSlides;this._movingElem.insertBefore(t,this._movingElem.firstElementChild),n+1===this._movingElem.children.length&&(this._numberSlidesAfterFrame+=1,this._numberOfSlides+=1,this._setCssSlideElem(t),this._setWidths()),this._callbackHandler({callback:i}),this._callApiFromBuffer()}},{key:"_insertAppend",value:function(e){var t=e.slideElem,i=e.callback,n=this._numberOfSlides;this._movingElem.appendChild(t),n+1===this._movingElem.children.length&&(this._numberSlidesAfterFrame+=1,this._numberOfSlides+=1,this._setCssSlideElem(t),this._setWidths()),this._callbackHandler({callback:i}),this._callApiFromBuffer()}},{key:"_insertBeforeSlideElem",value:function(e){var t=e.slideElem,i=e.index,n=e.callback;if(i<0||i>this._numberOfSlides-1)return console.warn("slide-V error: slideElem cannot be inserted. This index does not exists"),this._callbackHandler({callback:n}),void this._callApiFromBuffer();var s=this._numberOfSlides;this._movingElem.insertBefore(t,this._movingElem.children[i]),s+1===this._movingElem.children.length&&(this._numberSlidesAfterFrame+=1,this._numberOfSlides+=1,this._setCssSlideElem(t),this._setWidths()),this._callbackHandler({callback:n}),this._callApiFromBuffer()}},{key:"_removeSlideElem",value:function(e){var t=e.index,i=e.callback;if(t<0||t>this._numberOfSlides-1)return console.warn("slide-V error: slideElem cannot be deleted. This index does not exists"),this._callbackHandler({callback:i}),void this._callApiFromBuffer();this._numberSlidesAfterFrame-=1,this._numberOfSlides-=1;var n=this._movingElem.removeChild(this._movingElem.children[t]);this._removeCssSlideElem(n),this._setWidths(),this._callbackHandler({callback:i}),this._callApiFromBuffer()}},{key:"_deactivation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.initialMarkup,i=e.callback;this._isInit=!1,this._buffer=[],this._eventUnsubscribe(),t&&this._destoryDomStructure(),this._callbackHandler({callback:i})}},{key:"_destoryDomStructure",value:function(){for(var e=0;e<this._numberOfSlides;e+=1){var t=this._movingElem.firstElementChild;this._removeCssSlideElem(t),this._containerElem.appendChild(t)}this._containerElem.style.overflow="",this._containerElem.style.position="",this._containerElem.removeChild(this._movingElem),this._movingElem=null}},{key:"_removeCssSlideElem",value:function(e){e.style.display="",e.style.width="",e.removeAttribute("data-slide-v-elem"),this._config.slideElemClass&&e.classList.remove(this._config.slideElemClass)}},{key:"_eventSubscribe",value:function(){window.addEventListener("resize",this._onResize),this._movingElem.addEventListener("transitionend",this._onTransitionEnd),this._containerElem.addEventListener("dragstart",this._onDragStart),this._movingElem.addEventListener("mousedown",this._onMouseDown),this._movingElem.addEventListener("touchstart",this._onTouchStart),this._config.draggable&&(this._movingElem.addEventListener("touchmove",this._onTouchMove),this._movingElem.addEventListener("touchend",this._onTouchEnd),document.addEventListener("mousemove",this._onMouseMove),this._movingElem.addEventListener("mouseleave",this._onMouseLeave),document.addEventListener("mouseup",this._onMouseUp))}},{key:"_eventUnsubscribe",value:function(){window.removeEventListener("resize",this._onResize),this._movingElem.removeEventListener("transitionend",this._onTransitionEnd),this._containerElem.removeEventListener("dragstart",this._onDragStart),this._movingElem.removeEventListener("mousedown",this._onMouseDown),this._movingElem.removeEventListener("touchstart",this._onTouchStart),this._config.draggable&&(this._movingElem.removeEventListener("touchmove",this._onTouchMove),this._movingElem.removeEventListener("touchend",this._onTouchEnd),document.removeEventListener("mousemove",this._onMouseMove),this._movingElem.removeEventListener("mouseleave",this._onMouseLeave),document.removeEventListener("mouseup",this._onMouseUp))}},{key:"_onMouseDown",value:function(e){this._inMovingProgress||1!==e.which||(this._isMouseDown=!0,this._clickX=e.clientX,this._startDragPos=parseFloat(this._movingElem.style.left),this._config.draggable&&(this._movingElem.style.cursor="-webkit-grabbing",this._movingElem.style.cursor="-moz-grabbing",this._movingElem.style.cursor="grabbing"))}},{key:"_onTouchStart",value:function(e){e.preventDefault(),this._inMovingProgress||(this._isTouchDown=!0,this._touchX=e.changedTouches[0].pageX,this._startDragPos=parseFloat(this._movingElem.style.left))}},{key:"_onMouseMove",value:function(e){this._isMouseDown&&(this._dragShift=this._clickX-e.clientX,this._dragMove())}},{key:"_onTouchMove",value:function(e){this._isTouchDown&&(this._dragShift=this._touchX-e.changedTouches[0].pageX,this._dragMove())}},{key:"_dragMove",value:function(){this._inMovingProgress=!0;var e=Math.sign(this._dragShift);if(this._dragdDirection!==e&&(this._dragdDirection=e,this._curentStep=this._getСurentStep(e*this._config.step),this._nextPositionLeft=this._getNextPositionLeft()),this._movingElem.style.transitionDuration="",0!==this._position||-1!==e)if(0!==this._numberSlidesAfterFrame||1!==e){var t=Math.abs(this._curentStep/this._config.slidesInFrame);this._movingElem.style.left="".concat(this._startDragPos-this._dragShift*t,"px"),parseFloat(this._movingElem.style.left)<this._nextPositionLeft&&1===e&&(this._movingElem.style.left="".concat(this._nextPositionLeft+.1*e,"px")),parseFloat(this._movingElem.style.left)>this._nextPositionLeft&&-1===e&&(this._movingElem.style.left="".concat(this._nextPositionLeft+.1*e,"px"))}else this._movingElem.style.left="".concat(this._startDragPos-.1*this._dragShift,"px");else this._movingElem.style.left="".concat(this._startDragPos-.1*this._dragShift,"px")}},{key:"_onMouseLeave",value:function(e){this._isMouseDown&&(this._isMouseDown=!1,this._config.draggable&&(this._movingElem.style.cursor="-webkit-grab",this._movingElem.style.cursor="-moz-grab",this._movingElem.style.cursor="grab"),this._dragEnd(e.target))}},{key:"_onTouchEnd",value:function(e){this._isTouchDown&&(this._isTouchDown=!1,this._dragEnd(e.target))}},{key:"_onMouseUp",value:function(e){this._isMouseDown&&(this._isMouseDown=!1,this._config.draggable&&(this._movingElem.style.cursor="-webkit-grab",this._movingElem.style.cursor="-moz-grab",this._movingElem.style.cursor="grab"),this._dragEnd(e.target))}},{key:"_dragEnd",value:function(e){if(this._dragdDirection=null,this._inMovingProgress=!1,!this._dragShift||Math.abs(this._dragShift)<3){var t=e.closest('[data-slide-v-elem="slide-elem"]');t&&this._config.onSlideClick(t)}(this._dragShift>0||this._dragShift<0)&&this._dropMoving()}},{key:"_dropMoving",value:function(){var e=parseFloat(this._movingElem.style.left),t=this._getDropMethod();if(t.call(this),this._dragShift=0,t===this.next||t===this.prev){var i=this._getProgressDragCoefficient(e);this._movingElem.style.transitionDuration="".concat(this._config.transitionDuration-this._config.transitionDuration*i,"ms")}}},{key:"_getDropMethod",value:function(){var e=this._containerElem.clientWidth*this._config.dragThreshold-2;return this._dragShift>e&&0!==this._numberSlidesAfterFrame?this.next:this._dragShift<-e&&0!==this._position?this.prev:this._cancelDrag}},{key:"_getProgressDragCoefficient",value:function(e){var t=this._nextPositionLeft,i=t+this._curentStep*this._lastSlideWidth;return(e-i)/(t-i)}},{key:"_cancelDrag",value:function(){this._inMovingProgress=!0,this._movingElem.style.transitionDuration="100ms",this._movingElem.style.left="".concat(this._startDragPos,"px"),this._movingElem.removeEventListener("transitionend",this._onTransitionEnd),this._movingElem.addEventListener("transitionend",this._onCancelDragTransitionEnd)}},{key:"_onCancelDragTransitionEnd",value:function(){this._inMovingProgress=!1,this._movingElem.addEventListener("transitionend",this._onTransitionEnd),this._movingElem.removeEventListener("transitionend",this._onCancelDragTransitionEnd)}},{key:"_onResize",value:function(){if(this._inMovingProgress)this._dynamicAdaptationStructure();else{this._movingElem.style.transitionDuration="";var e=parseFloat(getComputedStyle(this._movingElem.firstElementChild).width);this._movingElem.style.left="".concat(-this._position*e,"px")}}},{key:"_dynamicAdaptationStructure",value:function(){var e=this,t=parseFloat(getComputedStyle(this._movingElem.firstElementChild).width),i=-this._position*t,n=t/this._lastSlideWidth,s=i+this._curentStep*t,o=parseFloat(getComputedStyle(this._movingElem).left);o*=n,this._movingElem.style.left="".concat(o,"px"),this._movingElem.style.transitionDuration="";var r=(i-o)/(i-s);this._lastSlideWidth=t,clearTimeout(this._timerResize),this._timerResize=setTimeout(function(){e._movingElem.style.transitionDuration="".concat(e._config.transitionDuration*r,"ms"),e._movingElem.style.left="".concat(i,"px")},50)}}])&&h(t.prototype,i),a&&h(t,a),e}();t.default=c,e.exports=t.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.containerSelector;"containerSelector"in e||(t=".slide-v");if(null===t||void 0===t)return console.warn('Side-v error: "selector" - uncorrect type of data. Use "String" type or DOM element'),!1;if("string"!=typeof t&&1!==t.nodeType)return console.warn('Side-v error: "selector" - uncorrect type of data. Use "String" type or DOM element'),!1;var i="string"==typeof t?document.querySelector(t):t;if(null===i)return console.warn('Side-v error: "containerElem" - it is not DOM Element'),!1;if(0===i.children.length)return console.warn('Side-v error: "containerElem" - does not contain elements'),!1;if(e.dragThreshold<0||e.dragThreshold>1)return console.warn('Side-v error: "dragThreshold" - uncorrect value. The value must be from 0 to 1'),!1;return!0},e.exports=t.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.containerSelector=e.containerSelector||".slide-v",e.containerSelector="string"==typeof e.containerSelector?document.querySelector(e.containerSelector):e.containerSelector,e.transitionDuration=e.transitionDuration||300,e.slidesInFrame=e.slidesInFrame||1,e.step=e.step||e.slidesInFrame,e.onMoveEnd=e.onMoveEnd||function(){},e.onSlideClick=e.onSlideClick||function(){},e.draggable=!1!==e.draggable&&(e.draggable||!0),e.dragThreshold=0===e.dragThreshold?0:e.dragThreshold||.2,e},e.exports=t.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector;e.matches=e.matchesSelector=t||function(e){var t=document.querySelectorAll(e),i=this;return Array.prototype.some.call(t,function(e){return e===i})}},e.exports=t.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.matches=e.matches||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector,e.closest=e.closest||function(e){return this?this.matches(e)?this:this.parentElement?this.parentElement.closest(e):null:null}},e.exports=t.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){Math.sign=Math.sign||function(e){return 0===(e=+e)||isNaN(e)?e:e>0?1:-1}},e.exports=t.default}])});