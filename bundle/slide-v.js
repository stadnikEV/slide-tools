!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SlideV=t():e.SlideV=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.checkContainerStructure({config:t,containerSelector:t.containerSelector})&&(this.config=e.setDefaultPropertyConfig(t),this.mainContainer=document.querySelector(this.config.containerSelector),this.numberSlidesAfterFrame=this.mainContainer.children.length-this.config.elementsInFrame,this.init())}var t,i,r;return t=e,r=[{key:"checkContainerStructure",value:function(e){var t=e.config,i=e.containerSelector;if(!("containerSelector"in t))return console.warn('Side-v error: "config.containerSelector" is not defined. It is required parametr'),!1;if("string"!=typeof i)return console.warn('Side-v error: "config.containerSelector" - uncorrect type of data. Use "String" type'),!1;var n=document.querySelector(i);return null===n||void 0===n||1!==n.nodeType?(console.warn('Side-v error: "containerElem" - it is not DOM Element'),!1):0!==n.children.length||(console.warn('Side-v error: "containerElem" does not contain elements'),!1)}},{key:"setDefaultPropertyConfig",value:function(e){var t=e;return t.transitionDuration=e.transitionDuration||300,t.transitionTiming=e.transitionTiming||"linear",t.elementsInFrame=e.elementsInFrame||1,t.step=e.step||1,t.startIndex=e.startIndex||0,t}},{key:"removeCssSlideProperty",value:function(e){var t=e;return t.style.width="",t.style.display="",t}},{key:"checkStepLength",value:function(e,t){return!(Math.abs(e)>t)||(console.warn("slide-V error: the step exceeds the available value"),!1)}}],(i=[{key:"init",value:function(){this.initState||(this.bufer=[],this.movingContainer||(this.position=0,this.createDomStructure(),this.eventSubscribe(),0!==this.config.startIndex&&(this.adjustPosition(this.config.startIndex),this.firstRun=!0)),this.initState=!0,this.config.onInit&&this.config.onInit({curentIndex:this.position,numberElemAfterFrame:this.numberSlidesAfterFrame}))}},{key:"createDomStructure",value:function(){this.mainContainer.style.overflow="hidden",this.mainContainer.style.position="relative",this.movingContainer=document.createElement("div"),this.movingContainer.style.position="relative",this.setCssSlideMovingContainerProperty(),this.movingContainer.style.transition="left ".concat(this.config.transitionTiming," ").concat(this.config.transitionDuration,"ms");for(var e=this.mainContainer.children.length,t=0;t<e;t+=1){var i=this.mainContainer.firstElementChild;this.setCssSlideProperty(i),this.movingContainer.appendChild(i)}return this.mainContainer.prepend(this.movingContainer),this.mainContainer}},{key:"destory",value:function(e){this.initState&&(this.buferEnqueue(this.deactivation.bind(this,e)),this.inProgress||this.buferDequeue()())}},{key:"deactivation",value:function(e){this.initState=!1,this.bufer=null,e&&this.destoryDomStructure(),this.onChange("destory")}},{key:"destoryDomStructure",value:function(){for(var e=this.movingContainer.children.length,t=0;t<e;t+=1){var i=this.movingContainer.firstElementChild;i.style.width="",i.style.display="",this.mainContainer.appendChild(i)}return this.mainContainer.style.overflow="",this.mainContainer.style.position="",this.mainContainer.removeChild(this.movingContainer),this.movingContainer=null,this.config.startIndex=this.position,this.mainContainer}},{key:"adjust",value:function(e){this.initState&&(this.buferEnqueue(this.adjustPosition.bind(this,e)),this.inProgress||this.buferDequeue()())}},{key:"adjustPosition",value:function(t){var i=this,n=this.getAvailableStep(t);return e.checkStepLength(t,n)?(this.movingContainer.style.transitionDuration="",setTimeout(function(){i.inProgress=!1,i.movingContainer.style.transitionDuration="".concat(i.config.transitionDuration,"ms"),i.config.onChange&&!i.firstRun&&(i.firstRun=!1,i.onChange("adjust")),i.bufer.length>0&&i.buferDequeue()()},0),this.makeStep(t)):(this.bufer.length>0&&this.buferDequeue()(),!1)}},{key:"next",value:function(){this.initState&&(this.buferEnqueue(this.finityStep.bind(this,this.config.step,"next")),this.inProgress||this.buferDequeue()())}},{key:"prev",value:function(){this.initState&&(this.buferEnqueue(this.finityStep.bind(this,-this.config.step,"prev")),this.inProgress||this.buferDequeue()())}},{key:"finityStep",value:function(e,t){var i=this.getAvailableStep(e),n=Math.abs(e)<i?e:i*Math.sign(e);return 0===n?(this.inProgress=!1,this.bufer.length>0&&this.buferDequeue()(),n):this.makeStep(n,t)}},{key:"makeStep",value:function(e,t){var i=this;this.inProgress=!0,this.lastStartPositionLeft=this.position*parseFloat(getComputedStyle(this.movingContainer).left),this.position+=e,this.numberSlidesAfterFrame+=-e;var n=parseFloat(getComputedStyle(this.movingContainer.firstElementChild).width),r=-this.position*n;this.movingContainer.style.left="".concat(r,"px"),this.lastEndPositionLeft=r;return""===this.movingContainer.style.transitionDuration?e:(this.movingContainer.addEventListener("transitionend",function e(){i.inProgress=!1,i.movingContainer.removeEventListener("transitionend",e),i.config.onChange&&i.onChange(t),i.bufer.length>0&&i.buferDequeue()()}),e)}},{key:"goTo",value:function(e){this.initState&&(this.buferEnqueue(this.goToPosition.bind(this,e)),this.inProgress||this.buferDequeue()())}},{key:"goToPosition",value:function(t){var i=t-this.position,n=this.getAvailableStep(i);return e.checkStepLength(i,n)&&0!==i?this.makeStep(t-this.position,"goTo"):(this.bufer.length>0&&this.buferDequeue()(),!1)}},{key:"prepend",value:function(e){this.initState&&(this.buferEnqueue(this.insertPrepend.bind(this,e)),this.inProgress||this.buferDequeue()())}},{key:"insertPrepend",value:function(e){var t=e;return this.numberSlidesAfterFrame+=1,this.setCssSlideProperty(t),this.movingContainer.prepend(t),this.config.onChange&&this.onChange("prepend"),this.bufer.length>0&&this.buferDequeue()(),t}},{key:"append",value:function(e){this.initState&&(this.buferEnqueue(this.insertAppend.bind(this,e)),this.inProgress||this.buferDequeue()())}},{key:"insertAppend",value:function(e){var t=e;return this.numberSlidesAfterFrame+=1,this.setCssSlideProperty(t),this.movingContainer.append(t),this.config.onChange&&this.onChange("append"),this.bufer.length>0&&this.buferDequeue()(),t}},{key:"insert",value:function(e,t){this.initState&&(this.buferEnqueue(this.insertBeforeElem.bind(this,e,t)),this.inProgress||this.buferDequeue()())}},{key:"insertBeforeElem",value:function(e,t){var i=e;return t<0||t>this.movingContainer.children.length-1?(console.warn("slide-V error: the index exceeds the available value"),this.bufer.length>0&&this.buferDequeue()(),!1):(this.numberSlidesAfterFrame+=1,this.setCssSlideProperty(i),this.movingContainer.children[t].before(i),this.config.onChange&&this.onChange("insert"),this.bufer.length>0&&this.buferDequeue()(),i)}},{key:"remove",value:function(e){this.initState&&(this.buferEnqueue(this.removeElem.bind(this,e)),this.inProgress||this.buferDequeue()())}},{key:"removeElem",value:function(t){if(t<0||t>this.movingContainer.children.length-1)return console.warn("slide-V error: the index exceeds the available value"),this.bufer.length>0&&this.buferDequeue()(),!1;this.numberSlidesAfterFrame-=1;var i=this.movingContainer.removeChild(this.movingContainer.children[t]);return e.removeCssSlideProperty(i),this.config.onChange&&this.onChange("remove"),this.bufer.length>0&&this.buferDequeue()(),i}},{key:"buferEnqueue",value:function(e){return this.bufer.push(e),e}},{key:"buferDequeue",value:function(){var e=this.bufer[0];return this.bufer.shift(),e}},{key:"setCssSlideProperty",value:function(e){var t=e;return t.style.width="".concat(100/this.config.elementsInFrame,"%"),t.style.display="inline-block",t}},{key:"setCssSlideMovingContainerProperty",value:function(){return this.movingContainer.style.whiteSpace="nowrap",this.movingContainer.style.boxSizing="border-box",this.movingContainer.style.fontSize="0",this.movingContainer.style.left="0",this.movingContainer}},{key:"getAvailableStep",value:function(e){return 1===Math.sign(e)?this.numberSlidesAfterFrame:this.position}},{key:"getState",value:function(){return{curentSlideIndex:this.position,numberSlidesAfterFrame:this.numberSlidesAfterFrame}}},{key:"onChange",value:function(e){this.config.onChange({eventName:e,curentIndex:this.position,numberElemAfterFrame:this.numberSlidesAfterFrame})}},{key:"eventSubscribe",value:function(){window.addEventListener("resize",this.onResize.bind(this))}},{key:"onResize",value:function(){var e=this;if(this.inProgress){var t=parseFloat(getComputedStyle(this.movingContainer.firstElementChild).width),i=-this.position*t,n=i/this.lastEndPositionLeft,r=this.lastStartPositionLeft*n,o=(parseFloat(getComputedStyle(this.movingContainer).left)-i)/(r-i);this.lastEndPositionLeft=i,this.lastStartPositionLeft=r,this.movingContainer.style.transitionDuration="".concat(this.config.transitionDuration*o,"ms"),this.movingContainer.style.left="".concat(i,"px");this.movingContainer.addEventListener("transitionend",function t(){e.movingContainer.style.transitionDuration="".concat(e.config.transitionDuration,"ms"),e.movingContainer.removeEventListener("transitionend",t)})}else{this.movingContainer.style.transitionDuration="";var s=parseFloat(getComputedStyle(this.movingContainer.firstElementChild).width);this.movingContainer.style.left="".concat(-this.position*s,"px"),setTimeout(function(){e.movingContainer.style.transitionDuration="".concat(e.config.transitionDuration,"ms")},0)}}}])&&n(t.prototype,i),r&&n(t,r),e}();t.default=r,e.exports=t.default}])});